
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>monitor_side_GUI &#8212; Patient Monitoring Client/Server  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for monitor_side_GUI</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">ttk</span><span class="p">,</span> <span class="n">filedialog</span><span class="p">,</span> <span class="n">messagebox</span>
<span class="kn">from</span> <span class="nn">idlelib.tooltip</span> <span class="kn">import</span> <span class="n">Hovertip</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageTk</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">image</span> <span class="k">as</span> <span class="n">mpimg</span>

<span class="c1"># url = &#39;http://127.0.0.1:5000&#39;  # Used to connect to server. Later change to</span>
<span class="c1"># remote server VM</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://vcm-29744.vm.duke.edu:5000&#39;</span>


<div class="viewcode-block" id="sort_history_dict"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.sort_history_dict">[docs]</a><span class="k">def</span> <span class="nf">sort_history_dict</span><span class="p">(</span><span class="n">history_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sort the input history_dict by the timestamp keys</span>

<span class="sd">    This function will sort the history_dict by the datetime key</span>
<span class="sd">    such that the latest record will be the last one of the new output dict</span>

<span class="sd">    Args:</span>
<span class="sd">        history_dict (dict): a dict in the format of {timestamp_str: int or</span>
<span class="sd">        str} depending on the specific input history_dict</span>

<span class="sd">    Returns:</span>
<span class="sd">        sorted_date_time_dict_out (dict): the sorted version of input</span>
<span class="sd">        history_dict by the timestamp keys. It&#39;s still in the format of {</span>
<span class="sd">        timestamp_str: int or str} depending on the specific input</span>
<span class="sd">        history_dict. The most recent record will be</span>
<span class="sd">        the last data pair in the dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">date_time_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">date_time_str</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">history_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">date_time_dict</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date_time_str</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> &#39;</span>
                                                        <span class="s1">&#39;%H:%M:%S&#39;</span><span class="p">)]</span> <span class="o">=</span> \
            <span class="n">data</span>

    <span class="n">sorted_date_time_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">date_time_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>  <span class="c1"># All the</span>
    <span class="c1"># keys in this dict will be datetime object</span>

    <span class="n">sorted_date_time_dict_out</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">date_time_obj</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sorted_date_time_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">sorted_date_time_dict_out</span><span class="p">[</span><span class="n">date_time_obj</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> &#39;</span>
                                                         <span class="s1">&#39;%H:%M:%S&#39;</span><span class="p">)]</span> <span class="o">=</span> \
            <span class="n">data</span>
    <span class="c1"># Now all the keys in sorted_date_time_dict_out are str from the</span>
    <span class="c1"># corresponding datetime object following the format of &quot;%Y-%m-%d %H:%M:%S&quot;</span>
    <span class="k">return</span> <span class="n">sorted_date_time_dict_out</span></div>


<div class="viewcode-block" id="organize_patient_info_for_GUI"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.organize_patient_info_for_GUI">[docs]</a><span class="k">def</span> <span class="nf">organize_patient_info_for_GUI</span><span class="p">(</span><span class="n">patient_info_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Organize the sub dict inside of patient_info_dict so it&#39;s better for</span>
<span class="sd">    the GUI to use</span>

<span class="sd">    This function will go through all the data field from the raw</span>
<span class="sd">    patient_info_dict obtained from the server. If a dict datafield is {} or</span>
<span class="sd">    a str datafield is None, it fills in &#39;(No data yet)&#39; for those fileds.</span>
<span class="sd">    For all the other fields that have dict, it will sort those dict such</span>
<span class="sd">    that the latest key-value pair is on the last of the dictionary</span>

<span class="sd">    Args:</span>
<span class="sd">        patient_info_dict (dict): the raw patient_info_dict that can</span>
<span class="sd">    contain data field as {} if the field is a dict or None if the field is</span>
<span class="sd">    a str. Other dict datafields that are non-empty are in the order they</span>
<span class="sd">    are in the database. They should be in the format as {</span>
<span class="sd">    medical_record_number: int, patient_name: str, heart_rate_history: {</span>
<span class="sd">    timestmap_str: int}, ecg_image_history: {timestmap_str: b64_str},</span>
<span class="sd">    medical_filename_history: {timestmap_str: filename_str},</span>
<span class="sd">    medical_image_history: {timestmap_str: b64_str}}</span>

<span class="sd">    Returns:</span>
<span class="sd">        patient_info_dict (dict): the same patient_info_dict but with any</span>
<span class="sd">        empty datafield filled up as &#39;(No data yet)&#39; and all the non-empty</span>
<span class="sd">        dict data fields to be sorted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">patient_info_dict</span> <span class="o">==</span> <span class="p">{}:</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">patient_info_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">patient_info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="p">{}</span> <span class="ow">or</span> <span class="n">patient_info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">is</span> \
                    <span class="kc">None</span><span class="p">:</span>  <span class="c1"># The patient name field can be None if empty</span>
                <span class="n">patient_info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;(No data yet)&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;patient_name&#39;</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;medical_record_number&#39;</span><span class="p">:</span>
                    <span class="c1"># These 2 fields are not dictionaries so they cannot be</span>
                    <span class="c1"># sorted</span>
                    <span class="n">patient_info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">sort_history_dict</span><span class="p">(</span>
                        <span class="n">patient_info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">patient_info_dict</span></div>


<div class="viewcode-block" id="latest_value_in_history_dict"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.latest_value_in_history_dict">[docs]</a><span class="k">def</span> <span class="nf">latest_value_in_history_dict</span><span class="p">(</span><span class="n">history_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Obtained the latest value in a dict by the timsetamp key</span>

<span class="sd">    This function sort key-value pairs in history_dict by the timestamp keys</span>
<span class="sd">    such that the latest pair is the last pair in the dict. Then it obtains</span>
<span class="sd">    that latest value.</span>

<span class="sd">    Args: history_dict (dict): a dictionary in the format of {timestamp_str:</span>
<span class="sd">    int or str} depending on the specific history_dict Returns: latest_value</span>
<span class="sd">    (int or str): the value in history_dict that has the latest</span>
<span class="sd">    timestamp_str. Specific type depends on the specific input history_dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sorted_history_dict</span> <span class="o">=</span> <span class="n">sort_history_dict</span><span class="p">(</span><span class="n">history_dict</span><span class="p">)</span>
    <span class="n">latest_value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sorted_history_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">latest_value</span></div>


<div class="viewcode-block" id="latest_timestamp_in_history_dict"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.latest_timestamp_in_history_dict">[docs]</a><span class="k">def</span> <span class="nf">latest_timestamp_in_history_dict</span><span class="p">(</span><span class="n">history_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Obtained the latest timestamp in a dict</span>

<span class="sd">    This function sort key-value pairs in history_dict by the timestamp keys</span>
<span class="sd">    such that the latest pair is the last pair in the dict. Then it obtains</span>
<span class="sd">    that latest timestamp.</span>

<span class="sd">    Args:</span>
<span class="sd">        history_dict (dict): a dictionary in the format of {timestamp_str:</span>
<span class="sd">        int or str} depending on the specific history_dict</span>
<span class="sd">    Returns:</span>
<span class="sd">        latest_timestamp (str): the latest timestmap in history_dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sorted_history_dict</span> <span class="o">=</span> <span class="n">sort_history_dict</span><span class="p">(</span><span class="n">history_dict</span><span class="p">)</span>
    <span class="n">latest_timestamp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sorted_history_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">latest_timestamp</span></div>


<div class="viewcode-block" id="convert_b64_str_to_ndarray"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.convert_b64_str_to_ndarray">[docs]</a><span class="k">def</span> <span class="nf">convert_b64_str_to_ndarray</span><span class="p">(</span><span class="n">b64_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts a b64_string into a ndarray</span>

<span class="sd">    This function converts a base64 string into a ndarray with image data,</span>
<span class="sd">    so it can be used later to display in GUI</span>

<span class="sd">    Args:</span>
<span class="sd">         b64_string (str): string variable containing the image bytes</span>
<span class="sd">         encoded as a base64 string</span>

<span class="sd">    Returns:</span>
<span class="sd">        img_ndarray (ndarray):variable containing an ndarray with image data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">image_bytes</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">b64_string</span><span class="p">)</span>
    <span class="n">image_buf</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">image_bytes</span><span class="p">)</span>
    <span class="n">img_ndarray</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_buf</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;JPG&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img_ndarray</span></div>


<div class="viewcode-block" id="resize_image"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.resize_image">[docs]</a><span class="k">def</span> <span class="nf">resize_image</span><span class="p">(</span><span class="n">image_pil</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Resize an image_pil, so it fits into the GUI</span>

<span class="sd">    This function obtains the original image&#39;s size and resize it to have</span>
<span class="sd">    the new x as 150 proportionally so the new image can fit in the GUI</span>

<span class="sd">    Args:</span>
<span class="sd">        image_pil (PIL image): the imput image to be resized</span>

<span class="sd">    Returns:</span>
<span class="sd">        out_image_pil (PIL image): the new PIL image that now is</span>
<span class="sd">        proportionally resized to have the new_x as 150</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># This need a unit test</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">image_pil</span><span class="o">.</span><span class="n">size</span>
    <span class="n">new_x</span> <span class="o">=</span> <span class="mi">150</span>
    <span class="n">new_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">new_x</span> <span class="o">/</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">out_image_pil</span> <span class="o">=</span> <span class="n">image_pil</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">out_image_pil</span></div>


<div class="viewcode-block" id="b64_str_to_img_download"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.b64_str_to_img_download">[docs]</a><span class="k">def</span> <span class="nf">b64_str_to_img_download</span><span class="p">(</span><span class="n">b64_str</span><span class="p">,</span> <span class="n">file_direct</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save a b64_str into a file</span>

<span class="sd">    This function will save the b64_str into an image file locally by the</span>
<span class="sd">    given file directory</span>

<span class="sd">    Args:</span>
<span class="sd">        b64_str (str): the base64 string that contains the image data</span>
<span class="sd">        file_direct (str): the file directory to use to save the image</span>

<span class="sd">    Returns:</span>
<span class="sd">        0 or 1 (int): indicators of whether the code was successfully</span>
<span class="sd">        operated. 0 if sucessful and 1 if not</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">image_bytes</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">b64_str</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">file_direct</span><span class="p">:</span>  <span class="c1"># User selected file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_direct</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">save_file</span><span class="p">:</span>
            <span class="n">save_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">image_bytes</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># User cancels the file browser window</span>
        <span class="k">return</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="judge_int_str"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.judge_int_str">[docs]</a><span class="k">def</span> <span class="nf">judge_int_str</span><span class="p">(</span><span class="n">input_str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Judge whether input_str is a string that contains only numeric</span>
<span class="sd">    characters</span>

<span class="sd">    This functions uses a try-except block to judge whether input_str</span>
<span class="sd">    contains only numeric characters</span>

<span class="sd">    Args:</span>
<span class="sd">        input_str (str): a string that can contain only numeric characters</span>
<span class="sd">        or mixed with some other types of characters</span>

<span class="sd">    Returns:</span>
<span class="sd">        True or False (bool): bool indicator for the judgement. True if</span>
<span class="sd">    the string contains only number characters and False if the string</span>
<span class="sd">    contains some other kinds of characters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="main_window"><a class="viewcode-back" href="../Docs/monitor_side_GUI.html#monitor_side_GUI.main_window">[docs]</a><span class="k">def</span> <span class="nf">main_window</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Defines main window of the GUI</span>

<span class="sd">    The function creates the widgets and layout for the main window of the</span>
<span class="sd">    monitoring GUI. This GUI contains 4 tabs (tab0-3) and each tab has its</span>
<span class="sd">    own sub functions to create widgets on that tab. Some widgets have</span>
<span class="sd">    &quot;command&quot; functions linked to them, and those command functions can be</span>
<span class="sd">    found as &quot;sub-functions&quot; of this function as well</span>

<span class="sd">    These sub-functions should only do three things:</span>
<span class="sd">        1. Get information from the GUI</span>
<span class="sd">        2. Call separate, modular, testable functions to do the work</span>
<span class="sd">        3. Update the GUI as necessary based on response for functions in</span>
<span class="sd">        step 2.</span>

<span class="sd">    Returns:</span>
<span class="sd">        0 (int): indicator for successful code operation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">main_root_tab_setup</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Create the major root-tabs notebook window</span>

<span class="sd">        This function lays the basic of the root window and the 4-tab</span>
<span class="sd">        notebook so the whole root window is more organized and the user</span>
<span class="sd">        will be guided through by whether a tab is open or locked based on</span>
<span class="sd">        the user&#39;s responses or the condition judgements by the auto update</span>
<span class="sd">        functions</span>

<span class="sd">        Returns:</span>
<span class="sd">            root (window): the root window that contains everything</span>
<span class="sd">            tab_control (notebook): the notebook that contains all the tabs</span>
<span class="sd">            tab_0 (frame or tab): tab for Database status and all its widgets</span>
<span class="sd">            tab_1 (frame or tab): tab for Basic patient information and all</span>
<span class="sd">            its widgets</span>
<span class="sd">            tab_2 (frame or tab): tab for ECG image display and all its</span>
<span class="sd">            widgets</span>
<span class="sd">            tab_3 (frame or tab): tab for Medical image display and all its</span>
<span class="sd">            widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Define the main window</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

        <span class="c1"># Basic root configuration</span>
        <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;BLH Monitoring Station (Checking for database status)&#39;</span><span class="p">)</span>
        <span class="c1"># root.geometry(&#39;600x600&#39;)</span>

        <span class="c1"># Use a tab system to make the GUI more organized and intuitive</span>
        <span class="n">tab_control</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Notebook</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

        <span class="c1"># Configure the font of tabs</span>
        <span class="n">tab_style</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Style</span><span class="p">()</span>
        <span class="n">tab_style</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s1">&#39;TNotebook.Tab&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>

        <span class="c1"># Configure the font of widgets</span>
        <span class="n">widget_style</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Style</span><span class="p">()</span>
        <span class="n">widget_style</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span>

        <span class="c1"># Set up the tab system</span>
        <span class="n">tab_0</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">tab_control</span><span class="p">)</span>
        <span class="n">tab_1</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">tab_control</span><span class="p">)</span>
        <span class="n">tab_2</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">tab_control</span><span class="p">)</span>
        <span class="n">tab_3</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">tab_control</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">tab</span><span class="p">,</span> <span class="n">tab_name</span><span class="p">,</span> <span class="n">tab_init_state</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="p">[</span><span class="n">tab_0</span><span class="p">,</span> <span class="n">tab_1</span><span class="p">,</span> <span class="n">tab_2</span><span class="p">,</span> <span class="n">tab_3</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">&#39;Database status&#39;</span><span class="p">,</span> <span class="s1">&#39;Basic patient information&#39;</span><span class="p">,</span> <span class="s1">&#39;ECG images&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;Medical images&#39;</span><span class="p">],</span>
                <span class="p">[</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">tab</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">relief</span><span class="o">=</span><span class="s1">&#39;sunken&#39;</span><span class="p">)</span>
            <span class="n">tab_control</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
            <span class="n">tab_control</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">tab_name</span><span class="p">)</span>
            <span class="n">tab_control</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">tab_init_state</span><span class="p">)</span>

        <span class="n">tab_control</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span>
            <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">)</span>  <span class="c1"># Pack the tab control to make the tabs visible</span>
        <span class="k">return</span> <span class="n">root</span><span class="p">,</span> <span class="n">tab_control</span><span class="p">,</span> <span class="n">tab_0</span><span class="p">,</span> <span class="n">tab_1</span><span class="p">,</span> <span class="n">tab_2</span><span class="p">,</span> <span class="n">tab_3</span>

    <span class="k">def</span> <span class="nf">combobox_clean_widget_only</span><span class="p">(</span><span class="n">combobox</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the user selection from combobox and clean it</span>

<span class="sd">        This function will use the get() method first to obtain the user</span>
<span class="sd">        selection from a combobox and then clean it up. Doing so will clean</span>
<span class="sd">        up the previous residual option to avoid any confusion from user</span>

<span class="sd">        Args:</span>
<span class="sd">            combobox (widget): the input combobox where user made a selection</span>

<span class="sd">        Returns:</span>
<span class="sd">            selection (str): the returned user selection from the input</span>
<span class="sd">            combobox</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This method exists is to get the user&#39;s selection before clear up the</span>
        <span class="c1"># combobox where that selection was made</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="n">combobox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">combobox</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">selection</span>

    <span class="k">def</span> <span class="nf">tab_0_setup</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Set up tab 0 Database status</span>

<span class="sd">        This function sets up the tab 0 for checking on the database status</span>
<span class="sd">        in a more organized way with default message saying &#39;(Checking for</span>
<span class="sd">        database status)...&#39; in yellow background</span>

<span class="sd">        Returns:</span>
<span class="sd">            database_status_label (widget): the label that will indicate</span>
<span class="sd">            whether the database that the server is connecting to is empty</span>
<span class="sd">            or not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># ****** Tab 0: Database status ******</span>
        <span class="n">database_status_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">tab_0</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Checking for database status)...&#39;</span><span class="p">,</span>
            <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">database_status_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">database_status_label</span>

    <span class="k">def</span> <span class="nf">tab_1_setup</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Set up tab 1 Basic patient information</span>

<span class="sd">        This function sets up the tab 1 for displaying basic patient</span>
<span class="sd">        information in a more organized way with several labels to display</span>
<span class="sd">        obtained data,</span>
<span class="sd">        1 OK button, 1 combobox, and 1 Cancel Button</span>

<span class="sd">        Returns:</span>
<span class="sd">            tab_1_ok_button (widget): button to click to send in the</span>
<span class="sd">            selected record number</span>
<span class="sd">            tab_1_cancel_button (widget): button to click to have an option</span>
<span class="sd">            to quite the monitoring GUI</span>
<span class="sd">            tab_1_record_number_combo (widget): combobox to select record</span>
<span class="sd">            number</span>
<span class="sd">            tab_1_selected_record_number_label (widget): label to show the</span>
<span class="sd">            user selected record number</span>
<span class="sd">            tab_1_patient_name_label (widget): label to show the</span>
<span class="sd">            corresponding patient name</span>
<span class="sd">            tab_1_latest_heart_rate_label (widget): label to show the</span>
<span class="sd">            corresponding latest heart rate</span>
<span class="sd">            tab_1_latest_heart_rate_time_label (widget): label to show the</span>
<span class="sd">            corresponding timestamp of the latest heart rate</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># ****** Tab 1: Basic patient information ******</span>

        <span class="k">def</span> <span class="nf">tab_1_sect_1_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 1 Basic patient information section 1 Select</span>
<span class="sd">            patient medical record number</span>

<span class="sd">            This function sets up the tab 1 for displaying basic patient</span>
<span class="sd">            information section 1 Select</span>
<span class="sd">            patient medical record number</span>
<span class="sd">            in a more organized way with 1 OK button, 1 Cancel button and 1</span>
<span class="sd">            combobox for record number selection</span>

<span class="sd">            Returns:</span>
<span class="sd">                tab_1_ok_button (widget): button to click to send in the</span>
<span class="sd">                selected record number</span>
<span class="sd">                tab_1_cancel_button (widget): button to click to have an option</span>
<span class="sd">                to quite the monitoring GUI</span>
<span class="sd">                record_number_combo (widget): combobox to select record</span>
<span class="sd">                number</span>

<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 1: Select patient medical record number</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">tab_1</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 1: Select patient medical record number:&#39;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">tab_1_ok_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;OK&#39;</span><span class="p">,</span>
                                         <span class="n">command</span><span class="o">=</span><span class="n">tab_1_ok_cmd</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="n">tab_1_ok_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">tab_1_cancel_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Cancel&#39;</span><span class="p">,</span>
                                             <span class="n">command</span><span class="o">=</span><span class="n">tab_1_cancel_cmd</span><span class="p">,</span>
                                             <span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="n">tab_1_cancel_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">record_number</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
            <span class="n">record_number</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">record_number_combo</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Combobox</span><span class="p">(</span>
                <span class="n">tab_1</span><span class="p">,</span>
                <span class="n">textvariable</span><span class="o">=</span><span class="n">record_number</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span>
                <span class="n">values</span><span class="o">=</span><span class="n">get_all_med_number</span><span class="p">(),</span>
                <span class="n">state</span><span class="o">=</span><span class="s1">&#39;readonly&#39;</span>
            <span class="p">)</span>
            <span class="n">record_number_combo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">record_number_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Set the default to blank</span>
            <span class="k">return</span> <span class="n">tab_1_ok_button</span><span class="p">,</span> <span class="n">tab_1_cancel_button</span><span class="p">,</span> <span class="n">record_number_combo</span>

        <span class="k">def</span> <span class="nf">tab_1_sect_1_half_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up a separator and the prompt between section 1 and 2 on</span>
<span class="sd">            tab 1</span>

<span class="sd">            This function sets up separator and the prompt between section 1</span>
<span class="sd">            and 2 on tab 1 in a more organized way</span>

<span class="sd">            Return:</span>
<span class="sd">                None</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 1.5: section label</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Separator</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                                           <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                                           <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;we&#39;</span><span class="p">)</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">tab_1</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 2: Corresponding patient information retrieved &#39;</span>
                     <span class="s1">&#39;from database&#39;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">tab_1_sect_2_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 1 Basic patient information section 2 display the</span>
<span class="sd">            obtained patient name, record number, the latest heart rate and its</span>
<span class="sd">            timestamp</span>

<span class="sd">            This function sets up the 1 Basic patient information section 2</span>
<span class="sd">            display the obtained patient name, record number, the latest</span>
<span class="sd">            heart rate and its timestamp in a more organized way with</span>
<span class="sd">            several labels to display the obtained data</span>

<span class="sd">            Returns:</span>
<span class="sd">                selected_record_number_label (widget): label to show the</span>
<span class="sd">                user selected record number</span>
<span class="sd">                patient_name_label (widget): label to show the</span>
<span class="sd">                corresponding patient name</span>
<span class="sd">                latest_heart_rate_label (widget): label to show the</span>
<span class="sd">                corresponding latest heart rate</span>
<span class="sd">                latest_heart_rate_time_label (widget): label to show the</span>
<span class="sd">                corresponding timestamp of the latest heart rate</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 2: Display selected record number</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Medical record number you &#39;</span>
                           <span class="s1">&#39;selected:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">,</span>
                                             <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">selected_record_number_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span>
                                                     <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                                     <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">selected_record_number_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">Hovertip</span><span class="p">(</span><span class="n">selected_record_number_label</span><span class="p">,</span>
                     <span class="s1">&#39;Select a record numer to see verified record number &#39;</span>
                     <span class="s1">&#39;selection here&#39;</span><span class="p">)</span>

            <span class="c1"># ************ Widget group 3: Display patient name ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Corresponding &#39;</span>
                                  <span class="s1">&#39;patient name:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                                        <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">patient_name_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                           <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">patient_name_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">Hovertip</span><span class="p">(</span><span class="n">patient_name_label</span><span class="p">,</span>
                     <span class="s1">&#39;Select a record numer to see patient name here&#39;</span><span class="p">)</span>

            <span class="c1"># ************ Widget group 4: Display latest heart rate</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Latest &#39;</span>
                                  <span class="s1">&#39;heart &#39;</span>
                                  <span class="s1">&#39;rate (&#39;</span>
                                  <span class="s1">&#39;bpm):&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">,</span>
                                                <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">latest_heart_rate_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                                <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">latest_heart_rate_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">Hovertip</span><span class="p">(</span><span class="n">latest_heart_rate_label</span><span class="p">,</span>
                     <span class="s1">&#39;Select a record numer to see latest heart rate here&#39;</span><span class="p">)</span>

            <span class="c1"># ************ Widget group 5: Display latest heart rate time</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Timestamp for latest &#39;</span>
                           <span class="s1">&#39;heart &#39;</span>
                           <span class="s1">&#39;rate:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">latest_heart_rate_time_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                <span class="n">tab_1</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">latest_heart_rate_time_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">Hovertip</span><span class="p">(</span><span class="n">latest_heart_rate_time_label</span><span class="p">,</span>
                     <span class="s1">&#39;Select a record numer to see &#39;</span>
                     <span class="s1">&#39;latest heart rate timestamp here&#39;</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;*Yellow (Empty) means the GUI is waiting &#39;</span>
                                  <span class="s1">&#39;for user selection and white (No data &#39;</span>
                                  <span class="s1">&#39;yet) means the patient has no &#39;</span>
                                  <span class="s1">&#39;record in that data field.</span><span class="se">\n</span><span class="s1">*Tabs for ECG &#39;</span>
                                  <span class="s1">&#39;Images and Medical Images will be &#39;</span>
                                  <span class="s1">&#39;activated by clicking OK on this tab with &#39;</span>
                                  <span class="s1">&#39;a valid medical record number &#39;</span>
                                  <span class="s1">&#39;selection.&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
                      <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="k">return</span> \
                <span class="n">selected_record_number_label</span><span class="p">,</span> <span class="n">patient_name_label</span><span class="p">,</span> \
                <span class="n">latest_heart_rate_label</span><span class="p">,</span> <span class="n">latest_heart_rate_time_label</span>

        <span class="n">tab_1_ok_button</span><span class="p">,</span> <span class="n">tab_1_cancel_button</span><span class="p">,</span> \
            <span class="n">tab_1_record_number_combo</span> <span class="o">=</span> <span class="n">tab_1_sect_1_setup</span><span class="p">()</span>

        <span class="n">tab_1_sect_1_half_setup</span><span class="p">()</span>

        <span class="n">tab_1_selected_record_number_label</span><span class="p">,</span> <span class="n">tab_1_patient_name_label</span><span class="p">,</span> \
            <span class="n">tab_1_latest_heart_rate_label</span><span class="p">,</span> \
            <span class="n">tab_1_latest_heart_rate_time_label</span> <span class="o">=</span> <span class="n">tab_1_sect_2_setup</span><span class="p">()</span>

        <span class="k">return</span> \
            <span class="n">tab_1_ok_button</span><span class="p">,</span> <span class="n">tab_1_cancel_button</span><span class="p">,</span> \
            <span class="n">tab_1_record_number_combo</span><span class="p">,</span> <span class="n">tab_1_selected_record_number_label</span><span class="p">,</span> \
            <span class="n">tab_1_patient_name_label</span><span class="p">,</span> <span class="n">tab_1_latest_heart_rate_label</span><span class="p">,</span> \
            <span class="n">tab_1_latest_heart_rate_time_label</span>

    <span class="k">def</span> <span class="nf">tab_2_setup</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Set up tab 2 ECG images</span>

<span class="sd">        This function sets up the tab 2 for displaying ECG images in a more</span>
<span class="sd">        organized way with several labels to display obtained data,</span>
<span class="sd">        1 OK button, 1 combobox to select ECG to display, 1 combobox to</span>
<span class="sd">        select which ECG to download and 1 Download button to download the</span>
<span class="sd">        selected ECG</span>

<span class="sd">        Returns: tab_2_ecg_latest_img_label (widget): label to display the</span>
<span class="sd">        latest ECG tab_2_ecg_latest_timestamp_label (widget): label to</span>
<span class="sd">        display the timestamp for the latest ECG tab_2_ecg_history_combo (</span>
<span class="sd">        widget): combobox of the whole ECG history tab_2_ecg_display_button</span>
<span class="sd">        (widget): button to click to display the selected ECG</span>
<span class="sd">        tab_2_ecg_selected_img_label (widget): label to display the selected</span>
<span class="sd">        ECG tab_2_ecg_selected_timestamp_label (widget): label to display</span>
<span class="sd">        the timestamp for the selected ECG tab_2_ecg_download_combo (</span>
<span class="sd">        widget): combobox to select which side (latest or selected) of the</span>
<span class="sd">        ECG to download tab_2_ecg_download_button (widget): button to click</span>
<span class="sd">        to start the download process</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># ****** Tab 2: ECG images ******</span>
        <span class="k">def</span> <span class="nf">tab_2_sect_1_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 2 ECG images section 1 display the latest ECG</span>

<span class="sd">            This function sets up the tab 2 ECG images section 1 display the</span>
<span class="sd">            latest ECG in a more organized way with 2 labels to display the</span>
<span class="sd">            latest ECG image and its timestamp</span>

<span class="sd">            Returns:</span>
<span class="sd">                ecg_latest_img_label (widget): label to display the latest ECG</span>
<span class="sd">                ecg_latest_timestamp_label (widget): label to display the</span>
<span class="sd">                timestamp for the latest ECG</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 1: latest ECG</span>
            <span class="c1"># image</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 1: Below is &#39;</span>
                           <span class="s1">&#39;the &#39;</span>
                           <span class="s1">&#39;latest &#39;</span>
                           <span class="s1">&#39;ECG image in records&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                        <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Image: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Timstamp: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ecg_latest_img_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                             <span class="n">image</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                             <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">ecg_latest_img_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ecg_latest_timestamp_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                                   <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">ecg_latest_timestamp_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ecg_latest_img_label</span><span class="p">,</span> <span class="n">ecg_latest_timestamp_label</span>

        <span class="k">def</span> <span class="nf">tab_2_sect_2_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 2 ECG images section 2 display the selected ECG</span>

<span class="sd">            This function sets up the tab 2 ECG images section 2 display the</span>
<span class="sd">            selected ECG in a more organized way with 1 combobox to select</span>
<span class="sd">            ECG to display, 1 OK button as confirmation, and 2 labels to</span>
<span class="sd">            display the selected ECG and its timestamp</span>

<span class="sd">            Returns:</span>
<span class="sd">                ecg_history_combo (widget): combobox of the whole ECG</span>
<span class="sd">            history</span>
<span class="sd">            ecg_display_button (widget): button to click to display</span>
<span class="sd">            the selected ECG</span>
<span class="sd">            ecg_selected_img_label (widget): label to display the</span>
<span class="sd">            selected ECG</span>
<span class="sd">            ecg_selected_timestamp_label (widget): label to display the</span>
<span class="sd">            timestamp for the selected ECG</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 2: display historical ECG image</span>
            <span class="c1"># ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Separator</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                         <span class="n">rowspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                                         <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>
            <span class="c1"># sticky is</span>
            <span class="c1"># necessary to make the separator visible to human eyes</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 2: Select historical ECG &#39;</span>
                           <span class="s1">&#39;image in records by timestamp to &#39;</span>
                           <span class="s1">&#39;display &#39;</span>
                           <span class="s1">&#39;below: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ecg_selected_timestamp_var</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
            <span class="n">ecg_history_combo</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Combobox</span><span class="p">(</span>
                <span class="n">tab_2</span><span class="p">,</span>
                <span class="n">textvariable</span><span class="o">=</span><span class="n">ecg_selected_timestamp_var</span><span class="p">)</span>
            <span class="n">ecg_history_combo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">ecg_history_combo</span><span class="o">.</span><span class="n">state</span><span class="p">([</span><span class="s1">&#39;readonly&#39;</span><span class="p">])</span>
            <span class="n">ecg_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="n">ecg_display_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;OK&#39;</span><span class="p">,</span>
                                            <span class="n">command</span><span class="o">=</span><span class="n">tab_2_ok_cmd</span><span class="p">,</span>
                                            <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">ecg_display_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Image: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Timstamp: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ecg_selected_img_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                               <span class="n">image</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                               <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">ecg_selected_img_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

            <span class="n">ecg_selected_timestamp_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span>
                                                     <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                                     <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">ecg_selected_timestamp_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                              <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span> \
                <span class="n">ecg_history_combo</span><span class="p">,</span> <span class="n">ecg_display_button</span><span class="p">,</span> \
                <span class="n">ecg_selected_img_label</span><span class="p">,</span> <span class="n">ecg_selected_timestamp_label</span>

        <span class="k">def</span> <span class="nf">tab_2_set_3_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 2 ECG images section 3 download an ECG</span>

<span class="sd">            This function sets up the tab 2 ECG images section 3 download an</span>
<span class="sd">            ECG in a more organized way with 1 combobox to select which ECG</span>
<span class="sd">            to download and 1 Download button to downloda that selected ECG</span>

<span class="sd">            Returns: ecg_download_combo (widget): combobox to select which</span>
<span class="sd">            side (latest or selected) of the ECG to download</span>
<span class="sd">            ecg_download_button (widget): button to click to start the</span>
<span class="sd">            download process</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 3: download image ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Separator</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                                           <span class="n">columnspan</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                                           <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;we&#39;</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 3: Select to &#39;</span>
                           <span class="s1">&#39;download ECG &#39;</span>
                           <span class="s1">&#39;image file(s) locally: &#39;</span>
                           <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                    <span class="n">columnspan</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                    <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">download_ecg_img</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
            <span class="n">ecg_download_combo</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Combobox</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span>
                                              <span class="n">textvariable</span><span class="o">=</span><span class="n">download_ecg_img</span><span class="p">)</span>
            <span class="n">ecg_download_combo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">ecg_download_combo</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Latest ECG image (Left)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;Historical ECG image (Right)&#39;</span><span class="p">]</span>
            <span class="n">ecg_download_combo</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
            <span class="n">ecg_download_combo</span><span class="o">.</span><span class="n">state</span><span class="p">([</span><span class="s1">&#39;disabled&#39;</span><span class="p">])</span>
            <span class="n">ecg_download_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="n">ecg_download_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span>
                                             <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Download&#39;</span><span class="p">,</span>
                                             <span class="n">command</span><span class="o">=</span><span class="n">tab_2_download_cmd</span><span class="p">,</span>
                                             <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">ecg_download_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">Hovertip</span><span class="p">(</span><span class="n">ecg_download_button</span><span class="p">,</span>
                     <span class="s1">&#39;Click Display button to display the desired ECG to &#39;</span>
                     <span class="s1">&#39;activate &#39;</span>
                     <span class="s1">&#39;Download &#39;</span>
                     <span class="s1">&#39;button&#39;</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;*Yellow (Empty) means the GUI is waiting &#39;</span>
                                  <span class="s1">&#39;for user selection and white (No data &#39;</span>
                                  <span class="s1">&#39;yet) means the patient has no &#39;</span>
                                  <span class="s1">&#39;record in that data field.</span><span class="se">\n</span><span class="s1">*Download &#39;</span>
                                  <span class="s1">&#39;button will be activated by a click &#39;</span>
                                  <span class="s1">&#39;on the OK button on this tab.&#39;</span><span class="p">,</span>
                      <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span>
                            <span class="mi">12</span><span class="p">)</span>
                      <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">columnspan</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">ecg_download_combo</span><span class="p">,</span> <span class="n">ecg_download_button</span>

        <span class="n">tab_2_ecg_latest_img_label</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_latest_timestamp_label</span> <span class="o">=</span> <span class="n">tab_2_sect_1_setup</span><span class="p">()</span>

        <span class="n">tab_2_ecg_history_combo</span><span class="p">,</span> <span class="n">tab_2_ecg_display_button</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_selected_img_label</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_selected_timestamp_label</span> <span class="o">=</span> <span class="n">tab_2_sect_2_setup</span><span class="p">()</span>

        <span class="n">tab_2_ecg_download_combo</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_download_button</span> <span class="o">=</span> <span class="n">tab_2_set_3_setup</span><span class="p">()</span>

        <span class="k">return</span> \
            <span class="n">tab_2_ecg_latest_img_label</span><span class="p">,</span> <span class="n">tab_2_ecg_latest_timestamp_label</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_history_combo</span><span class="p">,</span> <span class="n">tab_2_ecg_display_button</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_selected_img_label</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_selected_timestamp_label</span><span class="p">,</span> <span class="n">tab_2_ecg_download_combo</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_download_button</span>

    <span class="k">def</span> <span class="nf">tab_3_setup</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Set up tab 3 Medical images</span>

<span class="sd">        This function sets up the tab 3 for displaying medical images in a</span>
<span class="sd">        more organized way with several labels to display the data,</span>
<span class="sd">        1 combobox for medical image selection, 1 OK button for confirmation</span>
<span class="sd">        and 1 Dowload button to download the selected medical image</span>

<span class="sd">        Returns:</span>
<span class="sd">            tab_3_med_history_combo (widget): combobox for selecting the</span>
<span class="sd">            medical image history</span>
<span class="sd">            tab_3_med_display_button (widget): button to click to display</span>
<span class="sd">            the selected medical image</span>
<span class="sd">            tab_3_med_selected_img_label (widget): label to display the</span>
<span class="sd">            selected medical image</span>
<span class="sd">            tab_3_med_selected_filename_label (widget): label to display the</span>
<span class="sd">             filename of the selected medical image</span>
<span class="sd">            tab_3_med_selected_timestamp_label (widget): label to display</span>
<span class="sd">            the timestamp of the selected medical image</span>
<span class="sd">            tab_3_med_download_button (widget): button to click to start the</span>
<span class="sd">             download process for the selected medical image</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># ****** Tab 3: Medical images ******</span>

        <span class="k">def</span> <span class="nf">tab_3_sect_1_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 3 Medical images section 1 display a selected</span>
<span class="sd">            medical image</span>

<span class="sd">            This function sets up the tab 3 Medical images section 1 display</span>
<span class="sd">            a selected medical image in a more organized way</span>

<span class="sd">            Returns:</span>
<span class="sd">                med_history_combo (widget): combobox for selecting the</span>
<span class="sd">                medical image history</span>
<span class="sd">                med_display_button (widget): button to click to display</span>
<span class="sd">                the selected medical image</span>
<span class="sd">                med_selected_img_label (widget): label to display the</span>
<span class="sd">                selected medical image</span>
<span class="sd">                med_selected_filename_label (widget): label to display the</span>
<span class="sd">                 filename of the selected medical image</span>
<span class="sd">                med_selected_timestamp_label (widget): label to display</span>
<span class="sd">                the timestamp of the selected medical image</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># ************ Widget group 1: display image ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 1: Select medical &#39;</span>
                           <span class="s1">&#39;image in records to display &#39;</span>
                           <span class="s1">&#39;below: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                           <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">med_selected_timestamp_var</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
            <span class="n">med_history_combo</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Combobox</span><span class="p">(</span>
                <span class="n">tab_3</span><span class="p">,</span>
                <span class="n">textvariable</span><span class="o">=</span><span class="n">med_selected_timestamp_var</span><span class="p">)</span>
            <span class="n">med_history_combo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">med_history_combo</span><span class="o">.</span><span class="n">state</span><span class="p">([</span><span class="s1">&#39;readonly&#39;</span><span class="p">])</span>
            <span class="n">med_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="n">med_display_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;OK&#39;</span><span class="p">,</span>
                                            <span class="n">command</span><span class="o">=</span><span class="n">tab_3_ok_cmd</span><span class="p">)</span>
            <span class="n">med_display_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Image: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">med_selected_img_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                               <span class="n">image</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                               <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">med_selected_img_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Filename: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">med_selected_filename_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span>
                                                    <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                                    <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">med_selected_filename_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Timestamp: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">med_selected_timestamp_label</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span>
                                                     <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span>
                                                     <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
            <span class="n">med_selected_timestamp_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span> \
                <span class="n">med_history_combo</span><span class="p">,</span> <span class="n">med_display_button</span><span class="p">,</span> \
                <span class="n">med_selected_img_label</span><span class="p">,</span> <span class="n">med_selected_filename_label</span><span class="p">,</span> \
                <span class="n">med_selected_timestamp_label</span>

        <span class="k">def</span> <span class="nf">tab_3_sect_2_setup</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;Set up tab 3 Medical images section 2 download a selected</span>
<span class="sd">            medical image</span>

<span class="sd">            This function sets up the tab 3 Medical images section 2</span>
<span class="sd">            download a selected medical image in a more organized way</span>

<span class="sd">            Returns:</span>
<span class="sd">                med_download_button (widget): button to click to start</span>
<span class="sd">            the download process for the selected medical image</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="c1"># ************ Widget group 2: download image ************</span>
            <span class="n">ttk</span><span class="o">.</span><span class="n">Separator</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                                           <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                                           <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;we&#39;</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span>
                      <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 2: Download current &#39;</span>
                           <span class="s1">&#39;medical image &#39;</span>
                           <span class="s1">&#39;file &#39;</span>
                           <span class="s1">&#39;locally: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                             <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

            <span class="n">med_download_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span>
                                             <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Download&#39;</span><span class="p">,</span>
                                             <span class="n">command</span><span class="o">=</span><span class="n">tab_3_download_cmd</span><span class="p">,</span>
                                             <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">med_download_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                     <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

            <span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;*Yellow (Empty) means the GUI is waiting &#39;</span>
                                  <span class="s1">&#39;for user selection and white (No data &#39;</span>
                                  <span class="s1">&#39;yet) means the patient has no &#39;</span>
                                  <span class="s1">&#39;record in that data field.</span><span class="se">\n</span><span class="s1">*Download &#39;</span>
                                  <span class="s1">&#39;button will be activated by a click &#39;</span>
                                  <span class="s1">&#39;on the OK button on this tab.&#39;</span><span class="p">,</span>
                      <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span>
                            <span class="mi">12</span><span class="p">)</span>
                      <span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span>
                <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">med_download_button</span>

        <span class="n">tab_3_med_history_combo</span><span class="p">,</span> <span class="n">tab_3_med_display_button</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_img_label</span><span class="p">,</span> <span class="n">tab_3_med_selected_filename_label</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_timestamp_label</span> <span class="o">=</span> <span class="n">tab_3_sect_1_setup</span><span class="p">()</span>

        <span class="n">tab_3_med_download_button</span> <span class="o">=</span> <span class="n">tab_3_sect_2_setup</span><span class="p">()</span>

        <span class="k">return</span> \
            <span class="n">tab_3_med_history_combo</span><span class="p">,</span> <span class="n">tab_3_med_display_button</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_img_label</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_filename_label</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">,</span> <span class="n">tab_3_med_download_button</span>

    <span class="k">def</span> <span class="nf">get_all_med_number</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Obtain all the medical record number from the database</span>

<span class="sd">        This function uses the route &#39;/api/monitor/all_med_number&#39; and based</span>
<span class="sd">        on the sttaus code, either to return a list of all the medical</span>
<span class="sd">        record number if the database has least 1 record or [&#39;(Server</span>
<span class="sd">        database is empty. Have at least 1 patient entry to proceed.)&#39;] if</span>
<span class="sd">        the database is empty</span>

<span class="sd">        Returns:</span>
<span class="sd">            all_med_number_list (list of int or str): if the server is</span>
<span class="sd">        well-connected, a list of all the</span>
<span class="sd">        medical record number if the database has least 1 record or [&#39;(</span>
<span class="sd">        Server database is empty. Have at least 1 patient entry to</span>
<span class="sd">        proceed.)&#39;] if the database is empty. If the server is not well</span>
<span class="sd">        conencted, it will be [&#39;Server connection has problems&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Professor mentioned that functions like this do not need unit test</span>
        <span class="c1"># functions since it simply obtains data from the server&#39;s database</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">+</span> <span class="s1">&#39;/api/monitor/all_med_number&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,):</span>
            <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>  <span class="c1"># Terminate the GUI since the server connection</span>
            <span class="c1"># has issues</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;Server connection has problems&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">all_med_number_list</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_med_number_list</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;(Server database is empty. Have at least 1 patient entry to &#39;</span>
                <span class="s1">&#39;proceed.)&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">all_med_number_list</span>

    <span class="k">def</span> <span class="nf">get_patient_data</span><span class="p">(</span><span class="n">record_number</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Obtain a patient&#39;s info dict by the given record_number</span>

<span class="sd">        This function uses the route</span>
<span class="sd">        /api/monitor/patient_info/&lt;record_number&gt; to obtain a patient&#39;s info</span>
<span class="sd">        dict by the given record number. If the returned patient info dict</span>
<span class="sd">        is empty, that means the database doesn&#39;t have record for the given</span>
<span class="sd">        record_number</span>

<span class="sd">        Returns:</span>
<span class="sd">            patient_info_dict (dict of dict): if the server connection has</span>
<span class="sd">            no issues, {} if the database has no</span>
<span class="sd">            record for the given record_number or {</span>
<span class="sd">    medical_record_number: int, patient_name: str, heart_rate_history: {</span>
<span class="sd">    timestmap_str: int}, ecg_image_history: {timestmap_str: b64_str},</span>
<span class="sd">    medical_filename_history: {timestmap_str: filename_str},</span>
<span class="sd">    medical_image_history: {timestmap_str: b64_str}} if the corresponding</span>
<span class="sd">    patient info was found by the record_number. If the server connection</span>
<span class="sd">    has issues, it returns {{&#39;status&#39;: &#39;Server connection has problems&#39;}}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Professor mentioned that functions like this do not need unit test</span>
        <span class="c1"># functions since it simply obtains data from the server&#39;s database</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">url</span> <span class="o">+</span> <span class="s1">&#39;/api/monitor/patient_info/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">record_number</span><span class="p">))</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,):</span>
            <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>  <span class="c1"># Terminate the GUI since the server connection</span>
            <span class="c1"># has issues</span>
            <span class="k">return</span> <span class="p">{{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Server connection has problems&#39;</span><span class="p">}}</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;Patient information not found by the &#39;</span>
                                   <span class="s1">&#39;given medical record number.&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">patient_info_dict</span>

    <span class="k">def</span> <span class="nf">convert_ndarray_to_tk_image</span><span class="p">(</span><span class="n">img_ndarray</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert img_ndarray into a tk_image to display in the GUI</span>

<span class="sd">        This function converts the img_ndarray as a pil image, does a</span>
<span class="sd">        resize, and then convert that into a tk_image to display in the GUI</span>

<span class="sd">        Args:</span>
<span class="sd">            img_ndarray (ndarray): variable containing a ndarray with image</span>
<span class="sd">            data</span>

<span class="sd">        Returns:</span>
<span class="sd">            tk_image (TK image): variable containing an image to use with a</span>
<span class="sd">            Label widget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Professor mentioned that no need to unit test this function since</span>
        <span class="c1"># tk_image is more on the GUI side.</span>
        <span class="n">image_obj</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">img_ndarray</span><span class="p">)</span>
        <span class="n">image_obj</span> <span class="o">=</span> <span class="n">resize_image</span><span class="p">(</span>
            <span class="n">image_obj</span><span class="p">)</span>  <span class="c1"># Resize the image. Otherwise it is too</span>
        <span class="c1"># big to show in the GUI</span>
        <span class="n">tk_image</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span><span class="n">image_obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tk_image</span>

    <span class="k">def</span> <span class="nf">tab_1_ok_button_click_and_auto_update_core</span><span class="p">(</span><span class="n">record_number_content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler function for updating all the information on all the tabs</span>

<span class="sd">        After the user clicks on the OK button on tab 1 or when an auto</span>
<span class="sd">        update is triggered, it judges whether the record_number_content is</span>
<span class="sd">        empty. It gives a warning if the record_number_content is empty or</span>
<span class="sd">        updates all the tabs if not</span>

<span class="sd">        Args: record_number_content (int): the record_number that&#39;s unique</span>
<span class="sd">        for each patient in the database</span>

<span class="sd">        Returns:</span>
<span class="sd">            0 (int): indicator of success code operation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">record_number_content</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>  <span class="c1"># This means the user has not</span>
            <span class="c1"># made a selection yet</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Select a patient medical &#39;</span>
                                              <span class="s1">&#39;record number in the &#39;</span>
                                              <span class="s1">&#39;dropdown menu first to &#39;</span>
                                              <span class="s1">&#39;see basic patient information &#39;</span>
                                              <span class="s1">&#39;and get access to ECG image &#39;</span>
                                              <span class="s1">&#39;tab and medical image tab.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">get_patient_data</span><span class="p">(</span><span class="n">record_number_content</span><span class="p">)</span>
            <span class="n">organized_patient_info_dict</span> <span class="o">=</span> <span class="n">organize_patient_info_for_GUI</span><span class="p">(</span>
                <span class="n">patient_info_dict</span><span class="p">)</span>

            <span class="n">core_update_tab_1</span><span class="p">(</span><span class="n">organized_patient_info_dict</span><span class="p">)</span>
            <span class="n">core_update_tab_2</span><span class="p">(</span><span class="n">organized_patient_info_dict</span><span class="p">)</span>
            <span class="n">core_update_tab_3</span><span class="p">(</span><span class="n">organized_patient_info_dict</span><span class="p">)</span>

            <span class="c1"># Only give accesses of tab_2 and tab_3 to the</span>
            <span class="c1"># user if a medical record number has been selected</span>
            <span class="k">for</span> <span class="n">tab</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">tab_3</span><span class="p">]:</span>  <span class="c1"># These are tab 2 and 3</span>
                <span class="n">tab_control</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">core_update_tab_1</span><span class="p">(</span><span class="n">organized_patient_info_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Core function that updates tab 1 Nasic patient information</span>

<span class="sd">        This funciton is the real worker that updates all the fields on tab</span>
<span class="sd">        1 based on the given organized_patient_info_dict when either the OK</span>
<span class="sd">        button on tab 1 is clicked or the auto update is triggered. It will</span>
<span class="sd">        update the patient name, the latest heart rate, and its timestamp with</span>
<span class="sd">        some background color changing</span>

<span class="sd">        Args:</span>
<span class="sd">            organized_patient_info_dict (dict of dict): {</span>
<span class="sd">    medical_record_number: int, patient_name: str, heart_rate_history: {</span>
<span class="sd">    timestmap_str: int}, ecg_image_history: {timestmap_str: b64_str},</span>
<span class="sd">    medical_filename_history: {timestmap_str: filename_str},</span>
<span class="sd">    medical_image_history: {timestmap_str: b64_str}}</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This function mainly updates widgets in tab 1 section 2</span>

        <span class="c1"># Obtain updated information</span>
        <span class="n">patient_name</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span><span class="s1">&#39;patient_name&#39;</span><span class="p">]</span>
        <span class="n">heart_rate_history</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span><span class="s1">&#39;heart_rate_history&#39;</span><span class="p">]</span>

        <span class="c1"># Update several widgets&#39; background color</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_1_selected_record_number_label</span><span class="p">,</span>
                       <span class="n">tab_1_patient_name_label</span><span class="p">,</span>
                       <span class="n">tab_1_latest_heart_rate_label</span><span class="p">,</span>
                       <span class="n">tab_1_latest_heart_rate_time_label</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

        <span class="c1"># Update several widgets&#39; contents</span>
        <span class="n">tab_1_selected_record_number_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="n">organized_patient_info_dict</span><span class="p">[</span><span class="s1">&#39;medical_record_number&#39;</span><span class="p">])</span>
        <span class="n">tab_1_patient_name_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">patient_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">heart_rate_history</span> <span class="o">==</span> <span class="s1">&#39;(No data yet)&#39;</span><span class="p">:</span>
            <span class="n">latest_heart_rate</span> <span class="o">=</span> <span class="s1">&#39;(No data yet)&#39;</span>
            <span class="n">latest_heart_rate_timestamp</span> <span class="o">=</span> <span class="s1">&#39;(No data yet)&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">latest_heart_rate</span> <span class="o">=</span> <span class="n">latest_value_in_history_dict</span><span class="p">(</span>
                <span class="n">organized_patient_info_dict</span><span class="p">[</span><span class="s1">&#39;heart_rate_history&#39;</span><span class="p">])</span>
            <span class="n">latest_heart_rate_timestamp</span> <span class="o">=</span> <span class="n">latest_timestamp_in_history_dict</span><span class="p">(</span>
                <span class="n">organized_patient_info_dict</span><span class="p">[</span><span class="s1">&#39;heart_rate_history&#39;</span><span class="p">])</span>

        <span class="n">tab_1_latest_heart_rate_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">latest_heart_rate</span><span class="p">)</span>
        <span class="n">tab_1_latest_heart_rate_time_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="n">latest_heart_rate_timestamp</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">core_update_tab_2</span><span class="p">(</span><span class="n">organized_patient_info_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Core function that updates tab 2 ECG images</span>

<span class="sd">        This funciton is the real worker that updates all the fields on tab</span>
<span class="sd">        2 based on the given organized_patient_info_dict when either the OK</span>
<span class="sd">        button on tab 1 is clicked or the auto update is triggered. It will</span>
<span class="sd">        update the latest ECG image and its timestamp with some background</span>
<span class="sd">        color changing. It will also update the combobox options on tab 2</span>
<span class="sd">        for all the possible ECG options</span>

<span class="sd">        Args:</span>
<span class="sd">            organized_patient_info_dict (dict of dict): {</span>
<span class="sd">    medical_record_number: int, patient_name: str, heart_rate_history: {</span>
<span class="sd">    timestmap_str: int}, ecg_image_history: {timestmap_str: b64_str},</span>
<span class="sd">    medical_filename_history: {timestmap_str: filename_str},</span>
<span class="sd">    medical_image_history: {timestmap_str: b64_str}}</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Update the latest ECG</span>
        <span class="c1"># Update several widgets&#39; background color</span>
        <span class="n">ecg_image_history</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span><span class="s1">&#39;ecg_image_history&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2_ecg_latest_img_label</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_latest_timestamp_label</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ecg_image_history</span> <span class="o">==</span> <span class="s1">&#39;(No data yet)&#39;</span><span class="p">:</span>
            <span class="n">latest_ecg</span> <span class="o">=</span> <span class="s1">&#39;(No data yet)&#39;</span>
            <span class="n">latest_ecg_img_tk</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">latest_ecg_timestamp</span> <span class="o">=</span> <span class="s1">&#39;(No data yet)&#39;</span>
            <span class="n">tab_2_ecg_latest_img_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">latest_ecg_img_tk</span><span class="p">,</span>
                                                 <span class="n">text</span><span class="o">=</span><span class="n">latest_ecg</span><span class="p">)</span>
            <span class="n">tab_2_ecg_latest_img_label</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">latest_ecg_img_tk</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Update several widgets&#39; contents in tab 2 section 1</span>
            <span class="n">latest_ecg_b64</span> <span class="o">=</span> <span class="n">latest_value_in_history_dict</span><span class="p">(</span>
                <span class="n">ecg_image_history</span><span class="p">)</span>

            <span class="c1"># Image conversion</span>
            <span class="n">latest_ecg_ndarray</span> <span class="o">=</span> <span class="n">convert_b64_str_to_ndarray</span><span class="p">(</span>
                <span class="n">latest_ecg_b64</span><span class="p">)</span>
            <span class="n">latest_ecg_img_tk</span> <span class="o">=</span> <span class="n">convert_ndarray_to_tk_image</span><span class="p">(</span>
                <span class="n">latest_ecg_ndarray</span><span class="p">)</span>

            <span class="n">latest_ecg_timestamp</span> <span class="o">=</span> <span class="n">latest_timestamp_in_history_dict</span><span class="p">(</span>
                <span class="n">ecg_image_history</span><span class="p">)</span>

            <span class="n">tab_2_ecg_latest_img_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">latest_ecg_img_tk</span><span class="p">)</span>
            <span class="n">tab_2_ecg_latest_img_label</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">latest_ecg_img_tk</span>

        <span class="n">tab_2_ecg_latest_timestamp_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="n">latest_ecg_timestamp</span><span class="p">)</span>

        <span class="c1"># Update tab 2 section 2</span>
        <span class="k">if</span> <span class="n">ecg_image_history</span> <span class="o">==</span> <span class="s1">&#39;(No data yet)&#39;</span><span class="p">:</span>
            <span class="n">tab_2_ecg_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;(No data yet)&#39;</span><span class="p">)</span>
            <span class="n">tab_2_ecg_history_combo</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="p">[],</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">tab_2_ecg_display_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">tab_2_ecg_download_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tab_2_ecg_history_combo</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;(No data yet)&#39;</span><span class="p">:</span>
                <span class="n">tab_2_ecg_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Clean the previous reisudal</span>
                <span class="c1"># text in the combobox</span>

            <span class="n">tab_2_ecg_history_combo</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span>
                <span class="n">ecg_image_history</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                <span class="n">state</span><span class="o">=</span><span class="s1">&#39;readonly&#39;</span><span class="p">)</span>

            <span class="n">tab_2_ecg_display_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="c1"># tab_2_ecg_download_button will be activated by the click on</span>
            <span class="c1"># the OK button on tab 2</span>

    <span class="k">def</span> <span class="nf">core_update_tab_3</span><span class="p">(</span><span class="n">organized_patient_info_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Core function that updates tab 3 Medical images</span>

<span class="sd">        This funciton is the real worker that updates all the fields on tab</span>
<span class="sd">        3 based on the given organized_patient_info_dict when either the OK</span>
<span class="sd">        button on tab 1 is clicked or the auto update is triggered. It will</span>
<span class="sd">        update the combobox on tab 3 for all the possible medical image</span>
<span class="sd">        options</span>

<span class="sd">        Args:</span>
<span class="sd">            organized_patient_info_dict (dict of dict): {</span>
<span class="sd">    medical_record_number: int, patient_name: str, heart_rate_history: {</span>
<span class="sd">    timestmap_str: int}, ecg_image_history: {timestmap_str: b64_str},</span>
<span class="sd">    medical_filename_history: {timestmap_str: filename_str},</span>
<span class="sd">    medical_image_history: {timestmap_str: b64_str}}</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Update tab 3 section 1 for medical image selection</span>
        <span class="n">medical_image_history</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span>
            <span class="s1">&#39;medical_image_history&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">medical_image_history</span> <span class="o">==</span> <span class="s1">&#39;(No data yet)&#39;</span><span class="p">:</span>
            <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;(No data yet)&#39;</span><span class="p">)</span>
            <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="p">[],</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">tab_3_med_display_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="n">tab_3_med_download_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;(No data yet)&#39;</span><span class="p">:</span>
                <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

            <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span>
                <span class="n">medical_image_history</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                <span class="n">state</span><span class="o">=</span><span class="s1">&#39;readonly&#39;</span><span class="p">)</span>

            <span class="n">tab_3_med_display_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="c1"># tab_3_ecg_download_button will be activated by the click on</span>
            <span class="c1"># the OK button on tab 3</span>

    <span class="k">def</span> <span class="nf">tab_1_ok_cmd</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Command function for when the OK button on tab 1 is clicked</span>

<span class="sd">        When the OK button on tab 1 is clicked, this function will be</span>
<span class="sd">        triggered to reset tab 2 and 3, and call on</span>
<span class="sd">        tab_1_ok_button_click_and_auto_update_core() to update tab 1, 2, and 3</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 1. Get data from gui</span>
        <span class="c1"># 2. Call other functions</span>
        <span class="c1"># 3. Update gui</span>

        <span class="c1"># This is when the user clicks on the OK button on tab 1</span>
        <span class="n">record_number_content</span> <span class="o">=</span> <span class="n">combobox_clean_widget_only</span><span class="p">(</span>
            <span class="n">tab_1_record_number_combo</span><span class="p">)</span>

        <span class="c1"># Only reset tab 2 and 3 when the user clicks on the OK button on tab</span>
        <span class="c1"># 1. These should be outside of</span>
        <span class="c1"># tab_1_ok_button_click_and_auto_update_core() to avoid the</span>
        <span class="c1"># auto_update() from keeping reseting tab 2 and tab 3</span>
        <span class="n">tab_2_back_to_default</span><span class="p">()</span>
        <span class="n">tab_3_back_to_default</span><span class="p">()</span>

        <span class="n">tab_1_ok_button_click_and_auto_update_core</span><span class="p">(</span><span class="n">record_number_content</span><span class="p">)</span>
        <span class="c1"># This will update widgets on tab 1, 2, and 3</span>

    <span class="k">def</span> <span class="nf">tab_1_cancel_cmd</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Give the uesr an option to leave the GUI</span>

<span class="sd">        This function will be triggered when the Cancel button on tab 1 is</span>
<span class="sd">        clicked. It will open a message window to ask whether the user</span>
<span class="sd">        want to leave the GUI</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Simple button to ask whether uesr want to quit the GUI</span>
        <span class="n">user_selection</span> <span class="o">=</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">askokcancel</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Do &#39;</span>
                                     <span class="s1">&#39;you want to &#39;</span>
                                     <span class="s1">&#39;leave the &#39;</span>
                                     <span class="s1">&#39;Monitroing GUI?&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_selection</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tab_2_ok_cmd</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Command function for when the OK button on tab 2 is clicked</span>

<span class="sd">        When the OK button on tab 2 is clicked, this function will clean up</span>
<span class="sd">        the ECG history combobox, display the selected ECG image and</span>
<span class="sd">        timestamp, and activate the download button on tab 2</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ecg_selected_timestamp</span> <span class="o">=</span> <span class="n">combobox_clean_widget_only</span><span class="p">(</span>
            <span class="n">tab_2_ecg_history_combo</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ecg_selected_timestamp</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>  <span class="c1"># User made no selection</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Select an ECG image in the &#39;</span>
                                              <span class="s1">&#39;dropdown menu first to &#39;</span>
                                              <span class="s1">&#39;display&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2_ecg_download_combo</span><span class="p">,</span>
                           <span class="n">tab_2_ecg_download_button</span><span class="p">]:</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>  <span class="c1"># If there&#39;s at least 1</span>
                <span class="c1"># ECG history, the user must display that image first before</span>
                <span class="c1"># making a download</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tab_2_ecg_selected_timestamp_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">ecg_selected_timestamp</span><span class="p">)</span>

            <span class="n">tab_2_ecg_download_combo</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;readonly&#39;</span>
            <span class="n">tab_2_ecg_download_combo</span><span class="o">.</span><span class="n">current</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># The default will be the left</span>
            <span class="c1"># image (latest ECG image) to download</span>
            <span class="n">tab_2_ecg_download_button</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>

            <span class="n">selected_record_number</span> <span class="o">=</span> <span class="n">tab_1_selected_record_number_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">get_patient_data</span><span class="p">(</span><span class="n">selected_record_number</span><span class="p">)</span>
            <span class="n">organized_patient_info_dict</span> <span class="o">=</span> <span class="n">organize_patient_info_for_GUI</span><span class="p">(</span>
                <span class="n">patient_info_dict</span><span class="p">)</span>

            <span class="n">selected_ecg_img_b64_str</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span>
                <span class="s1">&#39;ecg_image_history&#39;</span><span class="p">][</span><span class="n">ecg_selected_timestamp</span><span class="p">]</span>
            <span class="n">selected_ecg_img_ndarray</span> <span class="o">=</span> <span class="n">convert_b64_str_to_ndarray</span><span class="p">(</span>
                <span class="n">selected_ecg_img_b64_str</span><span class="p">)</span>
            <span class="n">selected_ecg_img_tk_img</span> <span class="o">=</span> <span class="n">convert_ndarray_to_tk_image</span><span class="p">(</span>
                <span class="n">selected_ecg_img_ndarray</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2_ecg_selected_img_label</span><span class="p">,</span>
                           <span class="n">tab_2_ecg_selected_timestamp_label</span><span class="p">]:</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

            <span class="n">tab_2_ecg_selected_img_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">image</span><span class="o">=</span><span class="n">selected_ecg_img_tk_img</span><span class="p">)</span>
            <span class="n">tab_2_ecg_selected_img_label</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">selected_ecg_img_tk_img</span>

    <span class="k">def</span> <span class="nf">tab_2_download_cmd</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Command function for when the Download button on tab 2 is clicked</span>

<span class="sd">        When the Download button on tab 2 is clicked, this function will</span>
<span class="sd">        start the image download process for the selected ECG</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_selection_for_download</span> <span class="o">=</span> <span class="n">tab_2_ecg_download_combo</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user_selection_for_download</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Select an ECG image to &#39;</span>
                                              <span class="s1">&#39;download.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file_direct</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
                <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;JPG Image&#39;</span><span class="p">,</span> <span class="s1">&#39;.jpg&#39;</span><span class="p">)],</span>
                <span class="n">defaultextension</span><span class="o">=</span><span class="s1">&#39;.jpg&#39;</span><span class="p">,</span>
                <span class="n">initialdir</span><span class="o">=</span><span class="s1">&#39;.</span><span class="se">\\</span><span class="s1">downloaded_images</span><span class="se">\\</span><span class="s1">&#39;</span>
            <span class="p">)</span>

            <span class="n">record_number_content</span> <span class="o">=</span> <span class="n">tab_1_selected_record_number_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">get_patient_data</span><span class="p">(</span><span class="n">record_number_content</span><span class="p">)</span>
            <span class="n">organized_patient_info_dict</span> <span class="o">=</span> <span class="n">organize_patient_info_for_GUI</span><span class="p">(</span>
                <span class="n">patient_info_dict</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">user_selection_for_download</span> <span class="o">==</span> <span class="s1">&#39;Latest ECG image (Left)&#39;</span><span class="p">:</span>
                <span class="n">user_selected_timestamp</span> <span class="o">=</span> <span class="n">tab_2_ecg_latest_timestamp_label</span><span class="p">[</span>
                    <span class="s1">&#39;text&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">user_selection_for_download</span> <span class="o">==</span> <span class="s1">&#39;Historical ECG image (Right)&#39;</span><span class="p">:</span>
                <span class="n">user_selected_timestamp</span> <span class="o">=</span> \
                    <span class="n">tab_2_ecg_selected_timestamp_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Something is wrong.&#39;</span><span class="p">)</span>
                <span class="c1"># There shouldn&#39;t be a 3rd option</span>

            <span class="n">user_selected_ecg_img_b64_str</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span>
                <span class="s1">&#39;ecg_image_history&#39;</span><span class="p">][</span><span class="n">user_selected_timestamp</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">b64_str_to_img_download</span><span class="p">(</span><span class="n">user_selected_ecg_img_b64_str</span><span class="p">,</span>
                                       <span class="n">file_direct</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Downloaded&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Image &#39;</span>
                                                                <span class="s1">&#39;sucessfully &#39;</span>
                                                                <span class="s1">&#39;downloaded!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Image &#39;</span>
                                                                <span class="s1">&#39;download &#39;</span>
                                                                <span class="s1">&#39;process is &#39;</span>
                                                                <span class="s1">&#39;given up!&#39;</span><span class="p">)</span>

            <span class="n">tab_2_ecg_download_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Clean up the dropdown menu</span>

    <span class="k">def</span> <span class="nf">tab_3_ok_cmd</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Command function for when the OK button on tab 3 is clicked</span>

<span class="sd">        When the OK button on tab 3 is clicked, this function will clean up</span>
<span class="sd">        the medical image history combobox, display the selected medical</span>
<span class="sd">        image and timestamp, and activate the download button on tab 3</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">med_selected_timestamp</span> <span class="o">=</span> <span class="n">combobox_clean_widget_only</span><span class="p">(</span>
            <span class="n">tab_3_med_history_combo</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">med_selected_timestamp</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="s1">&#39;Select a medical image in the &#39;</span>
                                              <span class="s1">&#39;dropdown menu first to &#39;</span>
                                              <span class="s1">&#39;display&#39;</span><span class="p">)</span>

            <span class="n">tab_3_med_download_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tab_3_med_selected_timestamp_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">med_selected_timestamp</span><span class="p">)</span>

            <span class="n">tab_3_med_download_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>

            <span class="n">selected_record_number</span> <span class="o">=</span> <span class="n">tab_1_selected_record_number_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">get_patient_data</span><span class="p">(</span><span class="n">selected_record_number</span><span class="p">)</span>
            <span class="n">organized_patient_info_dict</span> <span class="o">=</span> <span class="n">organize_patient_info_for_GUI</span><span class="p">(</span>
                <span class="n">patient_info_dict</span><span class="p">)</span>

            <span class="n">historical_med_img_timestamp</span> <span class="o">=</span> \
                <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

            <span class="n">selected_med_img_b64_str</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span>
                <span class="s1">&#39;medical_image_history&#39;</span><span class="p">][</span><span class="n">historical_med_img_timestamp</span><span class="p">]</span>

            <span class="n">selected_med_img_ndarray</span> <span class="o">=</span> <span class="n">convert_b64_str_to_ndarray</span><span class="p">(</span>
                <span class="n">selected_med_img_b64_str</span><span class="p">)</span>
            <span class="n">selected_med_img_tk_img</span> <span class="o">=</span> <span class="n">convert_ndarray_to_tk_image</span><span class="p">(</span>
                <span class="n">selected_med_img_ndarray</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_3_med_selected_img_label</span><span class="p">,</span>
                           <span class="n">tab_3_med_selected_filename_label</span><span class="p">,</span>
                           <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">]:</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

            <span class="n">tab_3_med_selected_img_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">image</span><span class="o">=</span><span class="n">selected_med_img_tk_img</span><span class="p">)</span>
            <span class="n">tab_3_med_selected_img_label</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">selected_med_img_tk_img</span>

            <span class="n">tab_3_med_selected_filename_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">organized_patient_info_dict</span><span class="p">[</span>
                    <span class="s1">&#39;medical_filename_history&#39;</span><span class="p">][</span>
                    <span class="n">historical_med_img_timestamp</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">tab_3_download_cmd</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Command function for when the Download button on tab 3 is clicked</span>

<span class="sd">        When the Download button on tab 3 is clicked, this function will</span>
<span class="sd">        start the image download process for the selected medical image</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_selected_med_img_timestamp_for_download</span> <span class="o">=</span> \
            <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

        <span class="c1"># user_selected_med_img_timestamp_for_download can never be &#39;(</span>
        <span class="c1"># Empty)&#39; since tab  3&#39;s Download button need tab 3&#39;s OK button to</span>
        <span class="c1"># activate, which will never lead to &#39;(Empty)&#39; on</span>
        <span class="c1"># tab_3_med_selected_timestamp_label</span>

        <span class="c1"># Also user_selected_med_img_timestamp_for_download can never be &#39;(</span>
        <span class="c1"># No data yet)&#39; since tab 3 will be locked up if the patient has no</span>
        <span class="c1"># medical image history</span>

        <span class="n">file_direct</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
            <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;JPG Image&#39;</span><span class="p">,</span> <span class="s1">&#39;.jpg&#39;</span><span class="p">)],</span>
            <span class="n">defaultextension</span><span class="o">=</span><span class="s1">&#39;.jpg&#39;</span><span class="p">,</span>
            <span class="n">initialdir</span><span class="o">=</span><span class="s1">&#39;.</span><span class="se">\\</span><span class="s1">downloaded_images</span><span class="se">\\</span><span class="s1">&#39;</span>
        <span class="p">)</span>

        <span class="n">record_number_content</span> <span class="o">=</span> <span class="n">tab_1_selected_record_number_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

        <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">get_patient_data</span><span class="p">(</span><span class="n">record_number_content</span><span class="p">)</span>
        <span class="n">organized_patient_info_dict</span> <span class="o">=</span> <span class="n">organize_patient_info_for_GUI</span><span class="p">(</span>
            <span class="n">patient_info_dict</span><span class="p">)</span>

        <span class="n">historical_med_img_timestamp</span> <span class="o">=</span> <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">[</span>
            <span class="s1">&#39;text&#39;</span><span class="p">]</span>

        <span class="n">selected_med_img_b64_str</span> <span class="o">=</span> <span class="n">organized_patient_info_dict</span><span class="p">[</span>
            <span class="s1">&#39;medical_image_history&#39;</span><span class="p">][</span><span class="n">historical_med_img_timestamp</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">b64_str_to_img_download</span><span class="p">(</span><span class="n">selected_med_img_b64_str</span><span class="p">,</span>
                                   <span class="n">file_direct</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Downloaded&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Image &#39;</span>
                                                            <span class="s1">&#39;sucessfully &#39;</span>
                                                            <span class="s1">&#39;downloaded!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Image &#39;</span>
                                                            <span class="s1">&#39;download &#39;</span>
                                                            <span class="s1">&#39;process is &#39;</span>
                                                            <span class="s1">&#39;given up!&#39;</span><span class="p">)</span>
        <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Clean up the dropdown menu</span>

    <span class="k">def</span> <span class="nf">tab_1_lock</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Lock up tab 1 Basic patient information</span>

<span class="sd">        This function resets tab 1 Basic patient information and lock it up</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tab_1_back_to_default</span><span class="p">()</span>
        <span class="n">tab_control</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tab_1_back_to_default</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Reset tab 1 Basic patient information</span>

<span class="sd">        This function returns all the labels in tab 1 Basic patient</span>
<span class="sd">        information back to default state as &quot;(Empty)&quot; in yellow background</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tab_1_record_number_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_1_selected_record_number_label</span><span class="p">,</span>
                       <span class="n">tab_1_patient_name_label</span><span class="p">,</span>
                       <span class="n">tab_1_latest_heart_rate_label</span><span class="p">,</span>
                       <span class="n">tab_1_latest_heart_rate_time_label</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tab_2_lock</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Lock up tab 2 ECG images</span>

<span class="sd">        This function resets tab 2 ECG images and lock it up</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tab_2_back_to_default</span><span class="p">()</span>
        <span class="n">tab_control</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="n">tab_2</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tab_2_back_to_default</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Reset tab 2 ECG images</span>

<span class="sd">        This function returns all the labels in 2 ECG images back to default</span>
<span class="sd">        state as &quot;(Empty)&quot; in yellow background, all the combobox as cleaned</span>
<span class="sd">        up and deactivated, all the button as deactivated</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tab_2_ecg_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">tab_2_ecg_download_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2_ecg_latest_img_label</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_selected_img_label</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2_ecg_latest_img_label</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_latest_timestamp_label</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_selected_img_label</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_selected_timestamp_label</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_2_ecg_history_combo</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_display_button</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_download_combo</span><span class="p">,</span>
                       <span class="n">tab_2_ecg_download_button</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">tab_3_lock</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Lock up tab 3 Medical images</span>

<span class="sd">        This function resets tab 3 Medical images and lock it up</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tab_3_back_to_default</span><span class="p">()</span>
        <span class="n">tab_control</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="n">tab_3</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tab_3_back_to_default</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Reset tab 3 Medical images</span>

<span class="sd">        This function returns all the labels in 3 Medical images back to</span>
<span class="sd">        default state as &quot;(Empty)&quot; in yellow background, all the combobox as</span>
<span class="sd">        cleaned up and deactivated, all the button as deactivated</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tab_3_med_history_combo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="n">tab_3_med_selected_img_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_3_med_selected_img_label</span><span class="p">,</span>
                       <span class="n">tab_3_med_selected_filename_label</span><span class="p">,</span>
                       <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Empty)&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="p">[</span><span class="n">tab_3_med_display_button</span><span class="p">,</span> <span class="n">tab_3_med_download_button</span><span class="p">]:</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">auto_update</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Auto update to obtain the latest data from database</span>

<span class="sd">        This function automatically update the GUI with the latets data</span>
<span class="sd">        obtained from the database every 1 sec. It only checks the status of</span>
<span class="sd">        the database of no record number has been selected. If a record</span>
<span class="sd">        number has been selected, it will update the patient name, latets</span>
<span class="sd">        heart rate and its timestamp, latest ECG and its timestamp,</span>
<span class="sd">        all possible options for ECG history and medical image history</span>
<span class="sd">        comboboxes on tab 2 and 3 respectively</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_med_number_list</span> <span class="o">=</span> <span class="n">get_all_med_number</span><span class="p">()</span>

        <span class="n">database_status</span> <span class="o">=</span> <span class="n">update_database_status</span><span class="p">(</span><span class="n">all_med_number_list</span><span class="p">)</span>  <span class="c1"># Update</span>
        <span class="c1"># the root window</span>
        <span class="c1"># title, tab 0&#39;s dtabase status label, and tab 1, 2, and 3&#39;s states</span>
        <span class="c1"># based on the status base status</span>

        <span class="n">record_number_content</span> <span class="o">=</span> <span class="n">tab_1_selected_record_number_label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
        <span class="n">tab_1_record_number_combo</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">get_all_med_number</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">record_number_content</span> <span class="o">==</span> <span class="s1">&#39;(Empty)&#39;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">record_number_content</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_med_number_list</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;Previous patient number does &#39;</span>
                                   <span class="s1">&#39;not exist anymore. Please make a&#39;</span>
                                   <span class="s1">&#39; new selection.&#39;</span><span class="p">)</span>
            <span class="n">tab_1_back_to_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Selected medical record number as shown on tab 1 is still in</span>
            <span class="c1"># the database</span>
            <span class="n">tab_1_ok_button_click_and_auto_update_core</span><span class="p">(</span>
                <span class="n">record_number_content</span><span class="p">)</span>  <span class="c1"># Mainly update tab 1</span>

            <span class="c1"># Obtain the latest patient information</span>
            <span class="n">patient_info_dict</span> <span class="o">=</span> <span class="n">get_patient_data</span><span class="p">(</span><span class="n">record_number_content</span><span class="p">)</span>
            <span class="n">organized_patient_info_dict</span> <span class="o">=</span> <span class="n">organize_patient_info_for_GUI</span><span class="p">(</span>
                <span class="n">patient_info_dict</span><span class="p">)</span>

            <span class="n">tab_1_ok_button_click_and_auto_update_core</span><span class="p">(</span>
                <span class="n">record_number_content</span><span class="p">)</span>  <span class="c1"># Mainly update for tab 2 and 3</span>

        <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">auto_update</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_database_status</span><span class="p">(</span><span class="n">all_med_number_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the database status on tab 0</span>

<span class="sd">        This function automatically check for whether the database is empty.</span>
<span class="sd">        Based on the result, it updates the message on tab 0 and the</span>
<span class="sd">        lock/unlock status of tab 1, 2, and 3</span>

<span class="sd">        Returns:</span>
<span class="sd">            database_status (bool): True if the database is not empty and</span>
<span class="sd">            False if the database is empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Obtain root window title for later update</span>
        <span class="n">root_title_str</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;(&#39;</span> <span class="ow">in</span> <span class="n">root_title_str</span><span class="p">:</span>
            <span class="n">root_title_str</span> <span class="o">=</span> <span class="n">root_title_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>  <span class="c1"># Avoid the</span>
            <span class="c1"># title from accumulating the status string</span>

        <span class="k">if</span> <span class="n">all_med_number_list</span> <span class="o">==</span> <span class="p">[</span>
            <span class="s1">&#39;(Server database is empty. Have at least 1 patient entry to &#39;</span>
                <span class="s1">&#39;proceed.)&#39;</span><span class="p">]:</span>  <span class="c1"># If database is empty</span>
            <span class="n">title_database_status_str</span> <span class="o">=</span> <span class="s1">&#39; (Deactivated. Database is empty!)&#39;</span>

            <span class="c1"># Reset and deactivate all the tab_1, tab_2, tab_3 if the database</span>
            <span class="c1"># is empty</span>
            <span class="n">tab_1_lock</span><span class="p">()</span>
            <span class="n">tab_2_lock</span><span class="p">()</span>
            <span class="n">tab_3_lock</span><span class="p">()</span>

            <span class="n">database_status_label_str</span> <span class="o">=</span> <span class="s1">&#39;Database is empty! We are checking &#39;</span> \
                                        <span class="s1">&#39;the database constantly for &#39;</span> \
                                        <span class="s1">&#39;updates...&#39;</span>
            <span class="n">database_status_label_background_color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
            <span class="n">database_status</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># If database contains at least 1 patient&#39;s info</span>
            <span class="n">title_database_status_str</span> <span class="o">=</span> <span class="s1">&#39; (Active. Database is not empty.)&#39;</span>

            <span class="n">tab_control</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="n">tab_1</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>  <span class="c1"># Activate the</span>
            <span class="c1"># tab_1 tab so the user can continue</span>

            <span class="n">database_status_label_str</span> <span class="o">=</span> <span class="s1">&#39;Database is not empty. You can &#39;</span> \
                                        <span class="s1">&#39;proceed to the next tab now. &#39;</span> \
                                        <span class="s1">&#39;Database status will be &#39;</span> \
                                        <span class="s1">&#39;dynamically &#39;</span> \
                                        <span class="s1">&#39;updated.&#39;</span>
            <span class="n">database_status_label_background_color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span>
            <span class="n">database_status</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">root_title_str</span> <span class="o">+</span> <span class="n">title_database_status_str</span><span class="p">)</span>  <span class="c1"># Update root</span>
        <span class="c1"># window title based on database status</span>
        <span class="n">tab_0_database_status_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="n">database_status_label_str</span><span class="p">,</span>
            <span class="n">background</span><span class="o">=</span><span class="n">database_status_label_background_color</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">database_status</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;/api/monitor/database_connect_status&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>  <span class="c1"># Then the database is successfully connected to</span>
        <span class="c1"># the server</span>

        <span class="c1"># Initial set up for all the elements</span>
        <span class="n">root</span><span class="p">,</span> <span class="n">tab_control</span><span class="p">,</span> <span class="n">tab_0</span><span class="p">,</span> <span class="n">tab_1</span><span class="p">,</span> <span class="n">tab_2</span><span class="p">,</span> <span class="n">tab_3</span> <span class="o">=</span> <span class="n">main_root_tab_setup</span><span class="p">()</span>

        <span class="c1"># Set up tab_0</span>
        <span class="n">tab_0_database_status_label</span> <span class="o">=</span> <span class="n">tab_0_setup</span><span class="p">()</span>

        <span class="c1"># Set up tab_1</span>
        <span class="n">tab_1_ok_button</span><span class="p">,</span> <span class="n">tab_1_cancel_button</span><span class="p">,</span> <span class="n">tab_1_record_number_combo</span><span class="p">,</span> \
            <span class="n">tab_1_selected_record_number_label</span><span class="p">,</span> <span class="n">tab_1_patient_name_label</span><span class="p">,</span> \
            <span class="n">tab_1_latest_heart_rate_label</span><span class="p">,</span> \
            <span class="n">tab_1_latest_heart_rate_time_label</span> <span class="o">=</span> <span class="n">tab_1_setup</span><span class="p">()</span>

        <span class="c1"># Set up tab_2</span>
        <span class="n">tab_2_ecg_latest_img_label</span><span class="p">,</span> <span class="n">tab_2_ecg_latest_timestamp_label</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_history_combo</span><span class="p">,</span> <span class="n">tab_2_ecg_display_button</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_selected_img_label</span><span class="p">,</span> <span class="n">tab_2_ecg_selected_timestamp_label</span><span class="p">,</span> \
            <span class="n">tab_2_ecg_download_combo</span><span class="p">,</span> <span class="n">tab_2_ecg_download_button</span> <span class="o">=</span> <span class="n">tab_2_setup</span><span class="p">()</span>

        <span class="c1"># Set up tab_3</span>
        <span class="n">tab_3_med_history_combo</span><span class="p">,</span> <span class="n">tab_3_med_display_button</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_img_label</span><span class="p">,</span> <span class="n">tab_3_med_selected_filename_label</span><span class="p">,</span> \
            <span class="n">tab_3_med_selected_timestamp_label</span><span class="p">,</span> \
            <span class="n">tab_3_med_download_button</span> <span class="o">=</span> <span class="n">tab_3_setup</span><span class="p">()</span>

        <span class="n">auto_update</span><span class="p">()</span>
        <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># Notify the user if there is any issue for the server to connect</span>
        <span class="c1"># to the database</span>
        <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s1">&#39;Warning&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;Server has issues on connecting to the &#39;</span>
                               <span class="s1">&#39;server.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main_window</span><span class="p">()</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Patient Monitoring Client/Server</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Ziwei He, Junqi Lu, Ramana Balla.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>